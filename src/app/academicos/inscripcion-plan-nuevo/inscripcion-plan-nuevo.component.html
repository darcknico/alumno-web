<div class="animated fadeIn">
  <div class="row" >
    <div class="col-lg-12">
      <app-componente-alumno-detalle 
        [alumno]="inscripcion.alumno"
        [collapsed]="true"
        *ngIf="inscripcion">
      </app-componente-alumno-detalle>
    </div>
  </div>
  <div class="row" >
    <div class="col-lg-12">
      <app-componente-carrera-detalle 
        [plan_estudio]="inscripcion.plan_estudio" 
        [carrera]="inscripcion.carrera" 
        [collapsed]="true"
        *ngIf="inscripcion">
      </app-componente-carrera-detalle>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-12" >
      <div class="card animated fadeIn">
        <div class="card-header">
          Plan de Pagos
        </div>
        <div class="card-body">
          <form [formGroup]="formulario" >
            <div class="row">
              <div class="form-group col-sm-2">
                <label class="control-label">AÃ±o a Cursar</label>
                <input 
                  required
                  formControlName="anio"
                  type="text" 
                  class="form-control"
                  placeholder="2018">
              </div>
              <div class="form-group col-sm-3">
                <label class="control-label">Monto de la Matricula</label>
                <input currencyMask
                  required
                  formControlName="matricula_monto"
                  type="text" 
                  class="form-control"
                  placeholder="Monto Matricula">
              </div>
              <div class="form-group col-sm-3">
                <label class="control-label">Monto por Cuota</label>
                <input currencyMask
                  formControlName="cuota_monto"
                  type="text" 
                  class="form-control" 
                  placeholder="Monto Cuota">
              </div>
              <div class="form-group col-sm-3">
                <label class="control-label">Recargo de Interes</label>
                <input currencyMask
                  formControlName="interes_monto"
                  type="text" 
                  class="form-control" 
                  placeholder="Monto Interes por Mes">
              </div>
            </div>
            <div class="row">
              <div class="form-group col-sm-3">
                <label class="control-label">Beca</label>
                <ng-select [items]="becas"
                    [selectOnTab]="true"
                    bindValue="id"
                    bindLabel="nombre"
                    (ngModelChange)="seleccionar_beca()"
                    placeholder="Seleccione la Beca"
                    formControlName="id_beca"
                    [clearable]="false">
                </ng-select>
              </div>
              <div class="form-group col-sm-3" *ngIf="formulario.controls.id_beca.value>1">
                <label class="control-label">Porcentaje del Beneficio</label>
                <div class="input-group">
                  <input
                    formControlName="beca_porcentaje"
                    type="number" 
                    class="form-control" 
                    placeholder="0.00">
                  <div class="input-group-append">
                    <span class="input-group-text">
                      %<!--<i class="fa fa-user"></i>-->
                    </span>
                  </div>
                </div>
              </div>
            </div>
            <div class="row" *ngIf="dataSource.length>0">
              <div class="table-responsive">
                <table datatable [dtOptions]="dtOptions" class="table row-border hover" width="100%" >
                  <thead>
                    <tr>
                      <th>Fecha</th>
                      <th>Concepto</th>
                      <th>Fecha Vencimiento</th>
                      <th>Monto</th>
                    </tr>
                  </thead>
                  <tbody *ngIf="dataSource?.length != 0">
                    <tr *ngFor="let item of dataSource">
                      <td>{{ item.fecha | date:'dd/MM/yyyy' }}</td>
                      <td>{{ item.descripcion}}</td>
                      <td>{{ item.fecha_vencimiento | date:'dd/MM/yyyy' }}</td>
                      <td>${{ item.monto | number:'1.2-2':'es-AR' }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </form>
        </div>
        <div class="card-footer">
          <button 
            class="btn btn-block-xs-only m-1 btn-info" 
            type="button" 
            [disabled]="!formulario.valid"
            (click)="vista_previa()"
            >Vista previa de cuotas</button>
          <button 
            class="btn btn-block-xs-only m-1 btn-danger" 
            type="button" 
            [disabled]="!formulario.valid"
            (click)="continuar()"
            >Generar nuevo plan de pagos</button>
          <button 
            class="btn btn-block-xs-only m-1 btn-secondary" 
            type="button" 
            (click)="volver()"
            >VOLVER</button>
        </div>
      </div>
    </div>
  </div>
</div>
  